<!DOCTYPE html>
<html lang="en">
	<head>
	<meta charset="UTF-8">
	<title>restore/Mainpage</title>
	<style>
* { outline: 1px solid red; }
th.row-header{text-align: left}
	</style>

	<script>
let pending_task_list = fetch("/tasks", {
	headers: {
		"Accept": "application/json"
	}
}).then(function(res) {
	return res.json();
}).then(function(data){
	return data;
});

function fill_tasklist(response, element_factory, output_container)
{
	if(response.error_message)
	{
		let caption = element_factory.createElement("caption");
		caption.setAttribute("class", "error_message");
		let caption_content = element_factory.createTextNode(response.error_message);
		caption.appendChild(caption_content);
		output_container.appendChild(caption);
	}
}

window.onload = async function() {
	let task_list = await pending_task_list;
	fill_tasklist(task_list, document, document.getElementById("tasklist"));
}
	</script>
	</head>
	<body>
	<header><h1>Mainpage</h1></header>
	<main>
		<section><h1>Tasks</h1></section>
		<table id="tasklist">
		</table>
	</main>
	</body>
</html>


